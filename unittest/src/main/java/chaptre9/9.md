# 9.더 큰 설계 문제
- 좀더 작은 클래스를 만들기 : 새로운 클래스 추출
    - 책임 두 개를 분리하여 각 클래스로 할당
    
```java

```
- 명령-질의 분리(CommandQueryResponsibilitySegregation)
    - 명령을 실행(데이터의 상태변경)하는 작업과 질의에 대한 대답(어떤 값 반환) 두가지를 모두 하면 안된다.
    - 부작용을 만들고 동시에 값을 반환하여 사용자를 기만하는 메서드를 만들지 않도록 한다.

### 단위테스트의 유지보수 비용
동시에 다수의 테스트가 깨지는 경우는 설계에 문제가 많다는 신호일 수 있다.

### 자신을 보호하는 방법
- 코드 중복은 가장 큰 설계 문제
    - 테스트를 따르기가 어려워진다. -> 도우미 메서드 사용
    - 작은 코드 조각들을 단일 메서드로 추출하면 그 코드 조각들을 변경해야 할 때 미치는 영향을 최소화할 수 있다. -> 변경점이 하나로 모임
- 단위테스트를 설정하는데 코드가 수십줄 필요하다면 시스템 설계에 문제가 있다는 뜻이다.
- **SRP를 위반하면 클래스는 점점 커지고, 다른 클래스에 대한 의존성도 늘어나고 테스트 설정에 더 많은 노력이 요구된다.**
- private 메서드를 테스트하려는 충동은 클래스가 필요이상으로 커졌다는 의미이기도 하다
- private 메서드가 자꾸 늘어나면 내부 동작을 새 클래스로 옮기고 public으로 만드는 것이 좋다.
- 단위테스트가 어렵다면, 그 또한 설계를 개선해야하는 이유이다.
- **시스템 설계와 코드 품질이 낮을수록 단위테스트의 유지보수 비용이 증가한다.**
    

### 마치며
- 단위 테스트의 커버리지를 높이면 설계를 지속적으로 개선해 나가기 수월해진다.
- 유연한 설계는 더 작고 잘 조직된 구성요소로부터 시작된다.